<div class="topic-index-wrapper">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <div class="topic-index-single">

          <h2 class="topic-author">
            <%= link_to @topic.user.name, user_path(@topic.user.id) %>
          </h2>

          <% if @topic.image.attached? %>
            <%= image_tag @topic.image %>
          <% end %>
 
              <ul class="comments-likes">
                <li><i class="far fa-comment-dots like-btn"></i></li>
                <li id="likes_buttons_<%= @topic.id %>"><%= render partial: 'like_for_show', locals: { topic: @topic} %></li>
              </ul>

          <p class="topic-text">
            <%= @topic.description %>
          </p>

          <div class="text-left" >
            <%= l @topic.created_at %><br>
          </div>

          <% if logged_in? %>
            <% if @topic.user_id == current_user.id %>
            <div class="text-right" >
              <%= link_to '削除', "#{@topic.id}/destroy", method: :delete %>
            </div>
            <% end %>
          <% end %>

          <% @comments.each do |c| %>
            <div class="text-left">@<%= link_to c.user.name, user_path(c.user_id) %></div>
            <%= c.content %>
            <div class="text-right border-bottom"><%= l c.created_at %></div>
            <% if current_user == c.user %>
              <div class="text-right"><%= link_to "削除", topic_comment_path(@topic, c), method: :delete %></div>
            <% end %>
          <% end %>

          <%= form_for [@topic, @comment] do |f| %>
            <div class="form-group">
              <%= f.label :content %>
              <%= f.text_area :content, class: 'form-control' %>
            </div>
            <%= f.submit 'コメントする' %>
          <% end %>

        </div>
      </div>
    </div>
  </div>
</div>